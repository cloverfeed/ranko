{% extends "base.html" %}
{% block content %}

<div id="pdfview"></div>

<script src="{{url_for('static', filename='vendor/pdfjs-1.0.21-dist/build/pdf.js')}}"></script>
<script type="text/javascript">
var src = "{{url_for('rawdoc', id=doc.id)}}";
var pv = document.getElementById("pdfview");
PDFJS.workerSrc = "{{url_for('static', filename='vendor/pdfjs-1.0.21-dist/build/pdf.worker.js')}}";
PDFJS.getDocument(src).then(function(pdf) {
    for(var i = 1; i <= pdf.numPages ; i ++){
    pdf.getPage(i).then(function(page){
        var canvas = document.createElement('canvas');
        var context = canvas.getContext('2d');
        var scale = 1.2;
        var viewport = page.getViewport(scale);
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        page.render({canvasContext: context, viewport: viewport});
        pv.appendChild(canvas);
    });
    }
});
</script>

{% endblock %}
