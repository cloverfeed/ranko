{% extends "base.html" %}
{% block content %}


<div id="pdfview" class="col-md-9"></div>

<div class="col-md-3">
<div id="exitfullscreen">
    <div class="list-group">
        <a id="fullscreen_button_exit" href="#" class="list-group-item">
            <span class="glyphicon glyphicon-resize-small"></span>
            Exit fullscreen
        </a>
    </div>
</div>
<div id="subnav" data-spy="affix">

    <div class="list-group">
        <a id="fullscreen_button" href="#" class="list-group-item">
            <span class="glyphicon glyphicon-fullscreen"></span>
            Full screen
        </a>
        <a id="toggle_annotations_button" href="#" class="list-group-item">
            <span class="glyphicon glyphicon-eye-open"></span>
            Toggle annotations
        </a>
    </div>

    <h3><span class="glyphicon glyphicon-pencil"></span> History</h3>

    <p>
    <a href="{{url_for('.view_revisions', id=doc.id)}}">Revisions</a>
    </p>

    <p>
    <a href="{{url_for('.upload', revises=doc.id)}}">Upload a new version</a>
    </p>

    <h3><span class="glyphicon glyphicon-comment"></span> Comments</h3>
    <form method="POST" action="{{ url_for('.post_comment') }}" id="post_comment_form">
        {{form.hidden_tag()}}
        <p>{{form.comment()}}</p>
        {{form.docid()}}
        <p><input type="submit" value="Comment"></p>
    </form>
    <ul id="comments">
        {% for comment in comments %}
            <li>
            {{comment.text}}
            </li>
        {% endfor %}
    </ul>
</div>
</div>

{% endblock %}

{% block js_end %}
<script type="text/javascript">
PDFJS.workerSrc = "{{url_for('static', filename='vendor/pdfjs-' + config.X_PDFJS_VERSION + '-dist/build/pdf.worker.js')}}";
view_init({{doc.id}});
</script>
{% endblock %}
